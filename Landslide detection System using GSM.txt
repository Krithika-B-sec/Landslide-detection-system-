
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
// for vibration sensor 
#define BLYNK_PRINT Serial
 
 
#include <ESP8266WiFi.h>
#include <BlynkSimpleEsp8266.h>
#include <SimpleTimer.h>
 
// You should get Auth Token in the Blynk App.
// Go to the Project Settings (nut icon).
char auth[] = "2ZDyPYwAWQ3tmq7emmy_D0ypRduA_g91";
 
// Your WiFi credentials.
// Set password to "" for open networks.
char ssid[] = "AndroidAP7DF8";//ZONG MBB-E8231-6E63
char pass[] = "jamshaid";
 
SimpleTimer timer;
 
// sensors 
int vs = D0; // vibration sensor 
int sdata = 0; // sensor data will be stored in this variable.
 
String vdata = ""; 
 
// This function sends Arduino's up time every second to Virtual Pin (1).
// In the app, Widget's reading frequency should be set to PUSH. This means
// that you define how often to send data to Blynk App.
void myTimerEvent()
{
  // You can send any value at any time.
  // Please don't send more that 10 values per second.
  Blynk.virtualWrite(V1, millis() / 1000);
 
 
  
}
 
void setup()
{
  // Debug console
  Serial.begin(9600);
  pinMode(vs ,INPUT); 
  Blynk.begin(auth, ssid, pass);
 
  // Setup a function to be called every second
  timer.setInterval(10L,sensorvalue); // 1000L
}
 
void loop()
{
  Blynk.run();
  timer.run(); // Initiates BlynkTimer
 
}
 
void sensorvalue()
{
  long measurement =vibration();
 //delay(50);
  Serial.println(measurement);
  Blynk.virtualWrite(V3, measurement);
  if( measurement > 1000 )
  {
    Blynk.notify("Vibration detected!!");
  }
vdata = vdata + "Vibration: " + measurement;  
  // You can send any value at any time.
  // Please don't send more that 10 values per second.
  Blynk.virtualWrite(V4, vdata);
vdata = ""; 
}
 
long vibration(){
  long measurement=pulseIn (vs, HIGH);  //wait for the pin to get HIGH and returns measurement
  return measurement;
}